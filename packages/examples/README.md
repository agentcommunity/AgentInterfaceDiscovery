# AID Reference Examples & Hosting

This directory is a Vercel project for hosting the generated `aid.json` manifests and `aid.txt` snippets for all canonical examples.

The artifacts here are **not the source of truth**. They are **generated automatically** by the `build:examples` script. The single source of truth for all example configurations are the JSON files located in `packages/aid-web/public/samples/`. This ensures that the hosted examples are always in sync with the templates used in the Web UI.

## Hosting Architecture

This directory is designed as a single Vercel project that serves multiple `*.aid.agentcommunity.org` subdomains. This is achieved without any application code, relying instead on Vercel's routing rules.

The `vercel.json` file in this directory is **generated automatically** by the `build:examples` script. It contains `rewrite` rules that inspect the `Host` header of an incoming request and serve the appropriate `aid.json` file. **Do not edit this file manually.**

## Generating Artifacts

To regenerate all hosted artifacts (`aid.json`, `aid.txt`) and the `vercel.json` routing file, run the following command from the root of the monorepo:

```bash
pnpm run build:examples
```

This script will:
1. Read the `index.json` from `packages/aid-web/public/samples` to discover all example configs.
2. For each config, generate the final manifest and DNS TXT record using the canonical functions from `@agentcommunity/aid-core`.
3. Place the generated files into `packages/examples/public/[example-name]/`.
4. Automatically generate the `vercel.json` file with the correct routing rules based on the `domain` in each config.

## Deployment

This directory is a Vercel-ready project. To deploy:

1.  Create a new Vercel project pointing to the monorepo root.
2.  Set the **Root Directory** in Vercel's settings to `packages/examples`.
3.  Add your custom domains (e.g., `simple.aid.agentcommunity.org`) to the project.
4.  Commit and push changes â€“ Vercel will run `pnpm run build-examples` which regenerates `/public` before upload. 